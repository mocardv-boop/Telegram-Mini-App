<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prize Bot - Mini App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <meta name="telegram:app_id" content="–≤–∞—à-app-id">
    <meta name="telegram:app_url" content="https://–≤–∞—à-username.github.io/–≤–∞—à-repo/">
    
    <style>
        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --success-color: #28a745;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 400px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
            color: white;
        }
        
        .header h1 {
            font-size: 28px;
            margin-bottom: 5px;
        }
        
        .card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .button {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .button-primary {
            background: var(--primary-color);
            color: white;
        }
        
        .button-secondary {
            background: var(--secondary-color);
            color: white;
        }
        
        .button-success {
            background: var(--success-color);
            color: white;
        }
        
        .prize-result {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            color: white;
            text-align: center;
        }
        
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéÅ Prize Bot</h1>
            <p>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ø—Ä–∏–∑—ã –∏ —Ä–æ–∑—ã–≥—Ä—ã—à–∏</p>
        </div>
        
        <div class="card">
            <div id="userInfo">
                <p style="text-align: center;">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
            </div>
            
            <button class="button button-primary" onclick="playGame()">
                üéÆ –ò–≥—Ä–∞—Ç—å —Å–µ–≥–æ–¥–Ω—è
            </button>
            
            <button class="button button-secondary" onclick="showPrizes()">
                üì¶ –ú–æ–∏ –ø—Ä–∏–∑—ã
            </button>
            
            <button class="button button-secondary" onclick="showProfile()">
                üë§ –ü—Ä–æ—Ñ–∏–ª—å
            </button>
        </div>
        
        <div class="card prize-result hidden" id="result">
            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
        </div>
    </div>

    <script>
        // Telegram Web App
        const tg = window.Telegram.WebApp;
        let currentView = 'main';
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            tg.expand();
            tg.enableClosingConfirmation();
            tg.ready();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
            showUserInfo();
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥"
            tg.BackButton.onClick(goBack);
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        function showUserInfo() {
            const user = tg.initDataUnsafe.user;
            if (user) {
                document.getElementById('userInfo').innerHTML = `
                    <div style="text-align: center;">
                        <p>–ü—Ä–∏–≤–µ—Ç, <strong>${user.first_name}</strong>! üëã</p>
                    </div>
                `;
            } else {
                document.getElementById('userInfo').innerHTML = `
                    <div style="text-align: center;">
                        <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! üëã</p>
                    </div>
                `;
            }
        }
        
        // –ò–≥—Ä–∞—Ç—å –≤ –∏–≥—Ä—É
        function playGame() {
            const prizes = [
                {name: "üéÅ 10% —Å–∫–∏–¥–∫–∞", duration: "24 —á–∞—Å–∞", chance: 40},
                {name: "üöö –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞", duration: "24 —á–∞—Å–∞", chance: 30},
                {name: "üéÅ –ü–æ–¥–∞—Ä–æ–∫ –æ—Ç –ø–∞—Ä—Ç–Ω–µ—Ä–∞", duration: "24 —á–∞—Å–∞", chance: 20},
                {name: "üíé –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø—Ä–∏–∑", duration: "24 —á–∞—Å–∞", chance: 10}
            ];
            
            // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–Ω–¥–æ–º–∞
            const random = Math.random() * 100;
            let prize = prizes[0];
            let currentChance = 0;
            
            for (const p of prizes) {
                currentChance += p.chance;
                if (random <= currentChance) {
                    prize = p;
                    break;
                }
            }
            
            showResult(`
                <h2>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h2>
                <p style="font-size: 20px; margin: 15px 0;">${prize.name}</p>
                <p>–ü—Ä–∏–∑ –¥–µ–π—Å—Ç–≤—É–µ—Ç: ${prize.duration}</p>
                <button class="button button-success" onclick="goBack()">
                    üëç –û—Ç–ª–∏—á–Ω–æ!
                </button>
            `);
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–∑—ã
        function showPrizes() {
            showResult(`
                <h2>üì¶ –í–∞—à–∏ –ø—Ä–∏–∑—ã</h2>
                <div style="text-align: left; margin: 15px 0;">
                    <p>‚úÖ üéÅ 10% —Å–∫–∏–¥–∫–∞ (–∞–∫—Ç–∏–≤–Ω–æ 12—á)</p>
                    <p>‚úÖ üöö –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ (–∞–∫—Ç–∏–≤–Ω–æ 5—á)</p>
                    <p>‚ùå üíé –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø—Ä–∏–∑ (–∑–∞–∫–æ–Ω—á–∏–ª—Å—è)</p>
                </div>
                <button class="button button-primary" onclick="goBack()">
                    –ù–∞–∑–∞–¥
                </button>
            `);
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
        function showProfile() {
            const user = tg.initDataUnsafe.user;
            let userInfo = '';
            
            if (user) {
                userInfo = `
                    <p><strong>–ò–º—è:</strong> ${user.first_name} ${user.last_name || ''}</p>
                    <p><strong>Username:</strong> @${user.username || '–Ω–µ —É–∫–∞–∑–∞–Ω'}</p>
                    <p><strong>ID:</strong> ${user.id}</p>
                `;
            } else {
                userInfo = '<p>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞</p>';
            }
            
            showResult(`
                <h2>üë§ –í–∞—à –ø—Ä–æ—Ñ–∏–ª—å</h2>
                <div style="text-align: left; margin: 15px 0;">
                    ${userInfo}
                </div>
                <button class="button button-primary" onclick="goBack()">
                    –ù–∞–∑–∞–¥
                </button>
            `);
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        function showResult(content) {
            document.getElementById('result').innerHTML = content;
            document.getElementById('result').classList.remove('hidden');
            tg.BackButton.show();
            currentView = 'result';
        }
        
        // –ù–∞–∑–∞–¥
        function goBack() {
            if (currentView === 'result') {
                document.getElementById('result').classList.add('hidden');
                tg.BackButton.hide();
                currentView = 'main';
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
